<!DOCTYPE html>
<html>
 <head>
  <meta name="description" content="SpiderGL is a JavaScript 3D Graphics library which relies on WebGL for realtime rendering" />
  <meta name="keywords"    content="WebGL, Library, JavaScript, 3D, OpenGL, 2D, Graphics, Rendering, Realtime, Real-time, SpiderGL" />

  <title>SpiderGL - Stereo COLLADA Scene</title>

  <link rel="stylesheet" href="css/blueprint/screen.css" type="text/css" media="screen, projection">
  <link rel="stylesheet" href="css/blueprint/print.css" type="text/css" media="print">	

  <link rel="stylesheet" href="css/style.css" type="text/css" media="screen, projection"/>

</head>
<body id="index">
  <div class="container">

   <div id="header" class="span-24 last">

    <div id="title" class="prepend-1 span-10" >
     <h1>Spider<span class="red">GL</span></h1>
     <span class="subtitle">3D Graphics for Next-Generation WWW</span>
    </div>

    <div id="menu" class="prepend-1 span-12 last">

      <h4><a href="index.php">home</a></h4>
      <h4><a href="download.php">download</a></h4>
      <h4><a href="code.php">gallery</a></h4>
      <h4><a href="docs.php">docs</a></h4>
      <h4><a href="community.php">community</a></h4>
      <h4><a href="contacts.php">contacts</a></h4>

    </div>
   </div>

   <div class="span-24 last">
    <script type="text/javascript" src="js/spidergl.js"></script>

<script type="text/javascript" src="examples/collada.js"></script>

<script id="PHONG_VERTEX_SHADER" type="x-shader/x-vertex">
#ifdef GL_ES
precision highp float;
#endif

uniform   mat4 u_model_view_projection_mat;
uniform   mat4 u_model_view_mat;
uniform   mat3 u_view_normal_mat;

attribute vec4 a_position;
attribute vec3 a_normal;
attribute vec2 a_texcoord;

varying   vec3 v_view_position;
varying   vec3 v_view_normal;
varying   vec2 v_texcoord;

void main(void)
{

	v_view_position = (u_model_view_mat  * a_position).xyz;
	v_view_normal   = u_view_normal_mat * a_normal;
	v_texcoord      = a_texcoord;

	gl_Position = u_model_view_projection_mat * a_position;
}
</script>

<script id="PHONG_FRAGMENT_SHADER" type="x-shader/x-fragment">
#ifdef GL_ES
precision highp float;
#endif

uniform vec4      u_view_light_dir;

uniform vec4      u_emission;
uniform vec4      u_ambient;
uniform vec4      u_diffuse;
uniform vec4      u_specular;
uniform float     u_shininess;

uniform sampler2D s_emission;
uniform sampler2D s_ambient;
uniform sampler2D s_diffuse;
uniform sampler2D s_specular;
uniform sampler2D s_shininess;

varying vec3      v_view_position;
varying vec3      v_view_normal;
varying vec2      v_texcoord;

void main(void)
{
	vec3  matEmission  = u_emission.xyz + texture2D(s_emission, v_texcoord).xyz;
	vec3  matAmbient   = u_ambient.xyz;
	vec3  matDiffuse   = u_diffuse.xyz * texture2D(s_diffuse, v_texcoord).xyz;
	vec3  matAccessibility = texture2D(s_ambient, v_texcoord).xyz;
	vec3  matSpecular  = u_specular.xyz * texture2D(s_specular, v_texcoord).xyz;
	float matShininess = u_shininess + texture2D(s_shininess, v_texcoord).x;

	vec3  view_normal  = normalize(v_view_normal);
	float n_dot_l      = abs(dot(view_normal, -u_view_light_dir.xyz));
	if (u_view_light_dir.w > 0.5) n_dot_l = 1.0;
	vec3  refl_vector  = reflect(u_view_light_dir.xyz, view_normal);
	vec3  view_vector  = normalize(-v_view_position);

	vec3  emission = matEmission;
	vec3  ambient  = matAmbient * matDiffuse;
	vec3  diffuse  = matDiffuse * n_dot_l * matAccessibility;
	vec3  specular = matSpecular * pow(max(dot(refl_vector, view_vector), 0.0), u_shininess);

	vec3  color = emission + ambient + diffuse + specular;

	gl_FragData[0] = vec4(color, 1.0);
}
</script>

<script type="text/javascript" src="js/webGlScript.js"></script>

<div class="span-22 prepend-1 last">
 <h2>Example 10: Stereo COLLADA Scene</h2>
</div>
 <canvas id="SGL_CANVAS1" width="1000" height="600"></canvas>
 <p>
  <input id="STEREO_CHECKBOX" type="checkbox" onchange="toggleStereo()"/> Stereo Rendering<br/>

  COLLADA Scene
  <select id="MODELS_COMBO" onchange="changeScene()">
   <optgroup label="Basic">
    <option value="0">Duck</option>
    <option value="1">Seymour Plane</option>
   </optgroup>
   <optgroup label="Complex">
    <option value="2">Dining Room</option>

    <option value="3">husky</option>
    <option value="4">prvo</option>
    <option value="5">jenga</option>
   </optgroup>
  </select>
 </p>

<div class="span-12 prepend-1">
 <h4>Description</h4>
 <p>
 This demo import and render a COLLADA scene.
 </p>

 <p>
</div>

<div class="span-8 prepend-1 last">
 <h4>Controls</h4>
 <p>
 LeftMouseButton + MouseMove : Rotate<br/>
 MiddleMouseButton or (Shift + LeftMouseButton) + MouseMove : Pan<br/>
 MouseWheel : Scale<br/>

 Shift + MouseWheel : Dolly<br/>
 Shift+R : Reset Trackball<br/>
 A/Z : Increase/Decrese Depth Disparity<br/>
 </p>
</div>
<div class="span-22 prepend-1 last">
 <h4>Log</h4>
 <textarea id="LOG" style="width:800px; height:200px;"></textarea>

</div>
   </div>
   <div id="footer" class="span-23 prepend-1 last">
     <p>A <a href="http://vcg.isti.cnr.it">Visual Computing Laboratory - ISTI - CNR</a> initiative</p>
     <p><a href="http://sourceforge.net/projects/spidergl"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=293949&amp;type=10" width="80" height="15" alt="Get SpiderGL at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a></p>
   </div>
  </div>

<!-- Piwik -->
  <script type="text/javascript">
  var pkBaseURL = (("https:" == document.location.protocol) ? "https://sourceforge.net/apps/piwik/spidergl/" : "http://sourceforge.net/apps/piwik/spidergl/");
  document.write(unescape("%3Cscript src='" + pkBaseURL + "piwik.js' type='text/javascript'%3E%3C/script%3E"));
  </script>
  <script type="text/javascript">
  try {
  var piwikTracker = Piwik.getTracker(pkBaseURL + "piwik.php", 1);
  piwikTracker.trackPageView();
  piwikTracker.enableLinkTracking();
  } catch( err ) {}
  </script>
<!-- End Piwik Tag -->

  </body>
</html>
